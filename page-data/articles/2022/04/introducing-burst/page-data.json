{"componentChunkName":"component---src-templates-post-tsx","path":"/articles/2022/04/introducing-burst/","result":{"data":{"markdownRemark":{"html":"<h2 id=\"はじめに\" style=\"position:relative;\"><a href=\"#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB\" aria-label=\"はじめに permalink\" class=\"header-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>はじめに</h2>\n<p>この記事では、Burstコンパイラについての概要の説明と、実際に簡単な計算を行うコードをBurstコンパイラによって最適化しつつ、SIMD化の挙動について確かめてみます。</p>\n<p>また、実機でパフォーマンスを計測して、どの程度高速化するのかについても確かめてみます。</p>\n<p>検証環境は下記のとおりです。</p>\n<ul>\n<li>Unity 2020.3.32f1</li>\n<li>Burst 1.6.5</li>\n<li>Performance testing API 2.8.0-preview</li>\n<li>Android Pixel 4a</li>\n</ul>\n<h2 id=\"burstとsimd化について\" style=\"position:relative;\"><a href=\"#burst%E3%81%A8simd%E5%8C%96%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6\" aria-label=\"burstとsimd化について permalink\" class=\"header-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>BurstとSIMD化について</h2>\n<p><a href=\"https://blog.unity.com/ja/technology/enhancing-mobile-performance-with-the-burst-compiler\">https://blog.unity.com/ja/technology/enhancing-mobile-performance-with-the-burst-compiler</a></p>\n<p><a href=\"https://www.youtube.com/watch?v=rvBpUPFN5_I\">https://www.youtube.com/watch?v=rvBpUPFN5_I</a></p>\n<p>BurstはDOTS（データ指向技術スタック）向けの事前コンパイラー技術です。</p>\n<p>Unity通常のアプリケーション、特にil2cppがスクリプトバックエンドなアプリケーションではC#で書かれたコードをil2cppという技術でC++に変換します。</p>\n<p>一方Burstでは、C#（厳密にはC#のサブセット言語であるHPC#）を.NET Assemblyを経由してLLVMというコンパイラー基盤の中間構文であるIRに変換し、それを最適化します。\nこの最適化の一環で利用できるところはSIMD命令を用いたりCPUアーキテクチャごとの最適化などを行って、通常のil2cppで生成される命令よりも高速な命令を生成します。</p>\n<p>SIMDは（Single Instruction/Multiple Data）の略で、１命令で複数データをまとめて処理するような命令を指します。\nこの命令を積極的に使うことでデータの処理を並列に実行でき、それにより高速化が期待できます。</p>\n<h2 id=\"burstを試してみる\" style=\"position:relative;\"><a href=\"#burst%E3%82%92%E8%A9%A6%E3%81%97%E3%81%A6%E3%81%BF%E3%82%8B\" aria-label=\"burstを試してみる permalink\" class=\"header-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Burstを試してみる</h2>\n<p>今回はとりあえず動かすところを確かめたいので、早速Burstを触ってみます。</p>\n<h3 id=\"ピュアなc実装とパフォーマンス計測について\" style=\"position:relative;\"><a href=\"#%E3%83%94%E3%83%A5%E3%82%A2%E3%81%AAc%E5%AE%9F%E8%A3%85%E3%81%A8%E3%83%91%E3%83%95%E3%82%A9%E3%83%BC%E3%83%9E%E3%83%B3%E3%82%B9%E8%A8%88%E6%B8%AC%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6\" aria-label=\"ピュアなc実装とパフォーマンス計測について permalink\" class=\"header-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ピュアなC#実装とパフォーマンス計測について</h3>\n<p>下記のような、与えられた配列の要素を２乗して出力配列に格納するという実装を例に、これをBurst（＋Job System）により高速化してみます。</p>\n<div class=\"gatsby-highlight\" data-language=\"csharp\"><pre class=\"language-csharp\"><code class=\"language-csharp\"><span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">readonly</span> <span class=\"token class-name\"><span class=\"token keyword\">int</span></span> s_Size <span class=\"token operator\">=</span> <span class=\"token number\">1048576</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">private</span> <span class=\"token class-name\"><span class=\"token keyword\">float</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span></span> InputArray<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">private</span> <span class=\"token class-name\"><span class=\"token keyword\">float</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span></span> OutputArray<span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">[</span><span class=\"token attribute\"><span class=\"token class-name\">OneTimeSetUp</span></span><span class=\"token punctuation\">]</span>\n<span class=\"token keyword\">public</span> <span class=\"token return-type class-name\"><span class=\"token keyword\">void</span></span> <span class=\"token function\">Setup</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 配列の確保は1回だけやる</span>\n    InputArray <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\"><span class=\"token keyword\">float</span></span><span class=\"token punctuation\">[</span>s_Size<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    OutputArray <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\"><span class=\"token keyword\">float</span></span><span class=\"token punctuation\">[</span>s_Size<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">[</span><span class=\"token attribute\"><span class=\"token class-name\">Test</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Performance</span></span><span class=\"token punctuation\">]</span>\n<span class=\"token keyword\">public</span> <span class=\"token return-type class-name\"><span class=\"token keyword\">void</span></span> <span class=\"token function\">TestBaseline</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n    Measure\n        <span class=\"token punctuation\">.</span><span class=\"token function\">SetUp</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n        <span class=\"token punctuation\">{</span>\n            <span class=\"token comment\">// 配列の初期化</span>\n            <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\"><span class=\"token keyword\">int</span></span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> InputArray<span class=\"token punctuation\">.</span>Length<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">{</span>\n                InputArray<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">1.0f</span> <span class=\"token operator\">*</span> i<span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">Method</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n        <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\"><span class=\"token keyword\">var</span></span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> InputArray<span class=\"token punctuation\">.</span>Length<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">{</span>\n                <span class=\"token comment\">// 要素を２乗して出力配列に代入</span>\n                OutputArray<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> InputArray<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">*</span> InputArray<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">Run</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ちなみに <code>Performance</code> 属性は<a href=\"https://docs.unity3d.com/Packages/com.unity.test-framework.performance@2.8/manual/reference.html\">Performance testing API</a> が提供する属性で、上記のようにテストコードを書くと、このコードをエディターやiOS/Android実機上で簡単にパフォーマンスチェックできます。</p>\n<p>この記事ではPerformance testing APIについては最低限の使い方の紹介にとどめますが、詳細は<a href=\"https://blog.yucchiy.com/2021/09/unity-performance-testing/\">こちらの記事</a>を参考にしてみてください。</p>\n<p>Performance testing APIを用いると、テストを実行するようなノリでそのまま実機上でのパフォーマンス計測が可能です。</p>\n<h3 id=\"burst実装\" style=\"position:relative;\"><a href=\"#burst%E5%AE%9F%E8%A3%85\" aria-label=\"burst実装 permalink\" class=\"header-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Burst実装</h3>\n<p>下記に上記のベースライン実装のBurst実装を示します。</p>\n<div class=\"gatsby-highlight\" data-language=\"csharp\"><pre class=\"language-csharp\"><code class=\"language-csharp\"><span class=\"token punctuation\">[</span><span class=\"token attribute\"><span class=\"token class-name\">BurstCompile</span><span class=\"token attribute-arguments\"><span class=\"token punctuation\">(</span>CompileSynchronously <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span></span></span><span class=\"token punctuation\">]</span>\n<span class=\"token keyword\">private</span> <span class=\"token keyword\">struct</span> <span class=\"token class-name\">MyBurstJob</span> <span class=\"token punctuation\">:</span> <span class=\"token type-list\"><span class=\"token class-name\">IJob</span></span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token punctuation\">[</span><span class=\"token attribute\"><span class=\"token class-name\">ReadOnly</span></span><span class=\"token punctuation\">]</span> <span class=\"token keyword\">public</span> <span class=\"token class-name\">NativeArray<span class=\"token punctuation\">&lt;</span><span class=\"token keyword\">float</span><span class=\"token punctuation\">></span></span> Input<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">[</span><span class=\"token attribute\"><span class=\"token class-name\">WriteOnly</span></span><span class=\"token punctuation\">]</span> <span class=\"token keyword\">public</span> <span class=\"token class-name\">NativeArray<span class=\"token punctuation\">&lt;</span><span class=\"token keyword\">float</span><span class=\"token punctuation\">></span></span> Output<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token return-type class-name\"><span class=\"token keyword\">void</span></span> <span class=\"token function\">Execute</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\"><span class=\"token keyword\">int</span></span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> Input<span class=\"token punctuation\">.</span>Length<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">{</span>\n            Output<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> Input<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">*</span> Input<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ほぼジョブ実装しているだけで、違いは <code>BurstCompile</code> 属性を指定している点です。基本的にはジョブ実装に <code>BurstCompile</code> を指定することで、そのジョブがBurstコンパイラにより最適化されます。</p>\n<p>最適化されたコードは、（各プラットフォームごとの機械語ではありますが）Burst Inspectorから確認できます。Burst Inspectorは「メニュー > Jobs > Burst > Open Inspector...」で開けます。</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d77ba3bb230cc19d8c5b5ca7559ef0ec/d8d63/01.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 61%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAAB80lEQVQoz5WSTW7bMBBGfZnYbIDUkm1xyOHwR7Yk23GPkW5ygrZaFOg5guzag7TadtHbBCmhKUg7bpEWKLJ44JAiHwf6ONl2m3dk7Y+yLL+WZTksV9XgvBt8TYNGNQCowRgzeB8GRBqIaJCyymupRsTBe/8thPC9qqrDxHv/ebfbcdM0bK1lNIZDbbhtNYeg2FrDziWQ69qwtcSImPcSERuTvrlcl2V5OyGiu7Ztueu6hxBCNIZiqDF2LUYiFZWSUWsZEWU0pooAMgJAlFJmTvWjlJIXi8XNZLVa3WutWWv9EwBGRMPrhrjrDJNN68CIR4wBVko9Z1QqXayS4+1kuVzeAwADQBYqrbluLO/3xM5WZ2GSEUlWKu1VeUySfEap1CkXRXEUnm46C9et5cOBeL3BLEwyY+R/hfP5/G+hRmS3Cdw2ga33rEBm6VOnLxamlJuWeLetuF4fBUn01OmLhUrp0W9ofHNwY9vRiChH5+QYQpXRGkaAFEQajzwX3p2ED+kJaI0xNBT3exO7rYtKQUSEaEx6NpDnADnVP3k8CW+S8Msp5UwOpTF8fY28XitGlOdAnDv+z7xP/T7zxHw+v51Mp9NrIcQnIcR7IUT/6vKyX6yqHkD3RbHoi6L4J2VZ9ldXV/1sNuuFEB+EEB8vLi5e/wIOXXNyqfqoLgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Burst Inspector\"\n        title=\"Burst Inspector\"\n        src=\"/static/d77ba3bb230cc19d8c5b5ca7559ef0ec/5a190/01.png\"\n        srcset=\"/static/d77ba3bb230cc19d8c5b5ca7559ef0ec/772e8/01.png 200w,\n/static/d77ba3bb230cc19d8c5b5ca7559ef0ec/e17e5/01.png 400w,\n/static/d77ba3bb230cc19d8c5b5ca7559ef0ec/5a190/01.png 800w,\n/static/d77ba3bb230cc19d8c5b5ca7559ef0ec/c1b63/01.png 1200w,\n/static/d77ba3bb230cc19d8c5b5ca7559ef0ec/29007/01.png 1600w,\n/static/d77ba3bb230cc19d8c5b5ca7559ef0ec/d8d63/01.png 2026w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\"><p>Burst Inspector</p></figcaption>\n  </figure></p>\n<p>Burst InspectorでARMV8A_AARCH64向けに吐き出されたコードを確認してみます。特に下記の部分の <code>fmul</code> なのですが、SIMD命令が利用されていることが確認できます。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.Ltmp7:\n        .loc        3 107 0                         // CheckPerformance.cs:107:0\n        add        x12, x12, #32                   // =32\n        subs        x14, x14, #8                    // =8\n        .loc        3 109 0                         // CheckPerformance.cs:109:0\n        fmul        v0.4s, v0.4s, v0.4s\n        fmul        v1.4s, v1.4s, v1.4s</code></pre></div>\n<h2 id=\"パフォーマンス検証\" style=\"position:relative;\"><a href=\"#%E3%83%91%E3%83%95%E3%82%A9%E3%83%BC%E3%83%9E%E3%83%B3%E3%82%B9%E6%A4%9C%E8%A8%BC\" aria-label=\"パフォーマンス検証 permalink\" class=\"header-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>パフォーマンス検証</h2>\n<p>ピュアなC#実装とジョブシステムによる実装、ジョブシステム＋Burst実装の３実装で比較します。計測はPixel 4aで行いました。配列の初期化は計測に含めないものとします。</p>\n<p>ビルド時のパラメータは下記のとおりです。</p>\n<ul>\n<li>Scripting Backend: IL2CPP</li>\n<li>C++ Compiler Configuration: Release</li>\n<li>Burst AOT Settings > Optimize For: Performance</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th>実装</th>\n<th>中央値 (ms)</th>\n<th>最小 (ms)</th>\n<th>最大 (ms)</th>\n<th>標準偏差</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>ピュアC#</td>\n<td>5.26</td>\n<td>5.25</td>\n<td>5.30</td>\n<td>0.02</td>\n</tr>\n<tr>\n<td>ジョブシステム</td>\n<td>1.70</td>\n<td>1.69</td>\n<td>1.71</td>\n<td>0.00</td>\n</tr>\n<tr>\n<td>ジョブシステム＋Burst</td>\n<td>0.98</td>\n<td>0.98</td>\n<td>0.99</td>\n<td>0.00</td>\n</tr>\n</tbody>\n</table>\n<p>ジョブシステム＋BurstがピュアなC#実装と比べて約5倍ほど高速であることを確認できました。</p>","excerpt":"はじめに この記事では、Burstコンパイラについての概要の説明と、実際に簡単な計算を行うコードをBurstコンパイラによって最適化しつつ、SIMD化の挙動について確かめてみます。 また、実機でパフォーマンスを計測して、どの程度高速化するのかについても確かめてみます。 検証環境は下記のとおりです。 Unity 2020.3.32f1 Burst 1.6.5 Performance testing API 2.8.0-preview Android Pixel 4a BurstとSIMD…","fields":{"slug":"/articles/2022/04/introducing-burst/"},"frontmatter":{"date":"April 11, 2022","type":"memo","tags":["Unity","DOTS","Burst"],"title":"Burstを触ってみる - BurstによるSIMD化の検証","description":null,"eyecatch":null}}},"pageContext":{"id":"5d4d2052-5024-537d-b339-6e1487dbf3c9"}},"staticQueryHashes":["1480509143","3159585216"]}