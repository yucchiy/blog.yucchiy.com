{"componentChunkName":"component---src-templates-post-tsx","path":"/articles/2022/01/processx-intro/","result":{"data":{"markdownRemark":{"html":"<p><a href=\"https://github.com/Cysharp/ProcessX#zx\">Cysharp/ProcessX: Simplify call an external process with the async streams in C# 8.0.</a>\r\n<a href=\"https://neue.cc/2020/01/30_590.html\">neue cc - ProcessX - C#でProcessを C# 8.0非同期ストリームで簡単に扱うライブラリ</a></p>\n<p>C#でシェルを書くためのライブラリである <a href=\"https://github.com/Cysharp/ProcessX\">Cysharp/ProcessX</a> を触ってみます。</p>\n<p>通常C#でシェルを実行するには、外部プロセスを <code>System.Diagnostics.Process</code> クラスなどを介して実行します。ただし<a href=\"https://neue.cc/2020/01/30_590.html\">この記事に言及されているよう</a>に、<code>Process.Start</code>メソッドに渡す<code>ProcessStartInfo</code>は指定するフラグが多かったり、また<a href=\"https://qiita.com/skitoy4321/items/10c47eea93e5c6145d48\">非同期外部プロセス起動で標準出力を受け取る際の注意点</a>にあるようにハマリポイントが多かったりで、結構大変だったりします。（あと指定するフラグも、個人的には少し分かりづらかったりします。）</p>\n<p>実行したいコマンドを記述して、その結果をC#の文字列として受け取りたいだけなのに... 、ってのを実現したライブラリが「ProcessX」、という理解です。</p>\n<h2 id=\"インストール\" style=\"position:relative;\"><a href=\"#%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB\" aria-label=\"インストール permalink\" class=\"header-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>インストール</h2>\n<p>NuGetからProcessXをインストールできます。Visual StudioなどのIDEではNuGetのウインドウから下図のようにProcessXを探してきてインストールします。</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/cc5ffd0420e2f4370c34a37c5c7f22fd/81315/01.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 52%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABWklEQVQoz42S6W7DIBCE/f5P1j9V7domwWeMAS+Xj/QBpjI51Ehp2h+fViCYnR1I0lrjjRNaQRglQUiCVBbWrbB+u1S3PWG911FZDCOh6yWSgQvIVmA4CQxCg8ihEyY28G5GCBtCWF+wwfsF1gZI7ZBUvcHHJwfnDZrmhGly0JOFlBQPzvOGMG+x3ritvV8xTRbOzViWc2yQCNOjPBQ4lDU4b6MgkceyfGGez1eHf7Of3Rsk7UEifS+QZTnSjMWxo0ttQcb/W9CHNTpNetrwyRqU+QFV1UUxpQ2UIhjjr2OeH0Z+xu7uIigIWX4EYxzDScKYgHGcoJWBtfOd6MTvFx+57K13p4mSEkVeoiiOaOo+5qe1Qd+P8Rvto++CF5eviYIDBaQ5Q5YWqKuroCIceYdudGhHB0ULyK738F9lmXR6BeM9mrrDMCgY8vFPsZKDsSpmesvw54v+xjctkOiqnzd4FAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Visual StudioでのNuGet経由でのインストール方法\"\n        title=\"Visual StudioでのNuGet経由でのインストール方法\"\n        src=\"/static/cc5ffd0420e2f4370c34a37c5c7f22fd/5a190/01.png\"\n        srcset=\"/static/cc5ffd0420e2f4370c34a37c5c7f22fd/772e8/01.png 200w,\n/static/cc5ffd0420e2f4370c34a37c5c7f22fd/e17e5/01.png 400w,\n/static/cc5ffd0420e2f4370c34a37c5c7f22fd/5a190/01.png 800w,\n/static/cc5ffd0420e2f4370c34a37c5c7f22fd/c1b63/01.png 1200w,\n/static/cc5ffd0420e2f4370c34a37c5c7f22fd/29007/01.png 1600w,\n/static/cc5ffd0420e2f4370c34a37c5c7f22fd/81315/01.png 1656w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\"><p>Visual StudioでのNuGet経由でのインストール方法</p></figcaption>\n  </figure></p>\n<p>Visual StudioでのNuGet経由でのインストール方法</p>\n<p>またはコマンドライン経由でインストールする場合は、プロジェクト配下で</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ dotnet add package ProcessX</code></pre></div>\n<p>でインストールできます。</p>\n<h2 id=\"使い方\" style=\"position:relative;\"><a href=\"#%E4%BD%BF%E3%81%84%E6%96%B9\" aria-label=\"使い方 permalink\" class=\"header-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>使い方</h2>\n<p>本記事では一旦シンプルなコマンド実行にとどめますが（そのうち色々触ったら記事を書くかもです）、単純なコマンド実行であれば、 <code>ProcessX.StartAsync(\"zikkoushitai-command\")</code> を呼び出すだけでコマンドを実行し、その結果を文字列で受け取ることができます。</p>\n<p>例えば <code>ls</code> を実行して、結果を受け取る場合は下記のようにかけます。</p>\n<div class=\"gatsby-highlight\" data-language=\"csharp\"><pre class=\"language-csharp\"><code class=\"language-csharp\"><span class=\"token keyword\">using</span> <span class=\"token namespace\">Cysharp<span class=\"token punctuation\">.</span>Diagnostics</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">await</span> <span class=\"token keyword\">foreach</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\"><span class=\"token keyword\">string</span></span> item <span class=\"token keyword\">in</span> ProcessX<span class=\"token punctuation\">.</span><span class=\"token function\">StartAsync</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ls\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\r\n<span class=\"token punctuation\">{</span>\r\n    <span class=\"token comment\">// lsの結果を1行ずつコンソールに出力</span>\r\n    Console<span class=\"token punctuation\">.</span><span class=\"token function\">WriteLine</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>また、コマンドラインの実行結果を全行まとめて受け取る場合には下記が利用できます。</p>\n<div class=\"gatsby-highlight\" data-language=\"csharp\"><pre class=\"language-csharp\"><code class=\"language-csharp\"><span class=\"token class-name\"><span class=\"token keyword\">string</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span></span> result <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> ProcessX<span class=\"token punctuation\">.</span><span class=\"token function\">StartAsync</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ls\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">ToTask</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>こんな感じで、ほぼBashなどでのコマンド実行と同じような書き心地で、C#上でコマンドライン実行ができそうです。（ちなみに <code>ls</code> の場合は、もしかしたら <code>[Directory.GetFiles](https://docs.microsoft.com/en-us/dotnet/api/system.io.directory.getfiles?view=net-6.0)</code> を用いたほうがいい、という話はありそうですが... それはそれとして。）</p>\n<p>ちなみに<a href=\"https://neue.cc/2020/01/30_590.html\">紹介記事</a>にあるように、コマンド実行時のExitCodeが0以外が返ってきた場合、 <code>ProcessErrorException</code> 例外は飛んでくる仕様になっています。つまり、Bashなどで<code>set -e</code>をつけてスクリプトを記述することと同じようなエラーハンドリングとなっています。</p>\n<p><code>set -e</code>の場合はスクリプトが即座に終了してしまいますが、ProcessXで記述する場合は都度例外が飛んでくるので、エラーハンドリングはより柔軟におこなえるのは便利かもしれません。</p>\n<div class=\"gatsby-highlight\" data-language=\"csharp\"><pre class=\"language-csharp\"><code class=\"language-csharp\"><span class=\"token keyword\">try</span>\r\n<span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">await</span> <span class=\"token keyword\">foreach</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\"><span class=\"token keyword\">var</span></span> item <span class=\"token keyword\">in</span> ProcessX<span class=\"token punctuation\">.</span><span class=\"token function\">StartAsync</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"sonzaishinai-command\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span>\r\n<span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">ProcessErrorException</span> ex<span class=\"token punctuation\">)</span>\r\n<span class=\"token punctuation\">{</span>\r\n    <span class=\"token comment\">// ExitCodeが0以外の場合はここにくる</span>\r\n    Console<span class=\"token punctuation\">.</span><span class=\"token function\">WriteLine</span><span class=\"token punctuation\">(</span>ex<span class=\"token punctuation\">.</span><span class=\"token function\">ToString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"wsl上でのデバッグ\" style=\"position:relative;\"><a href=\"#wsl%E4%B8%8A%E3%81%A7%E3%81%AE%E3%83%87%E3%83%90%E3%83%83%E3%82%B0\" aria-label=\"wsl上でのデバッグ permalink\" class=\"header-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>WSL上でのデバッグ</h2>\n<p>Visual Studio上で実行すると（当然ですが）Windowsのコマンドラインとして実行されます。もしBashなどのシェルスクリプト代わりにプログラムする場合、デバッグ実行をLinux上などで行いたいかもしれません。その場合、WSL上でデバッグ実行すると確認しやすいかもしれません。</p>\n<p>Visual Studio 2022のPreview 3から、WSLを用いて.NETのアプリケーションをLinux上でデバッグする機能が追加されています。</p>\n<p><a href=\"https://docs.microsoft.com/en-us/visualstudio/debugger/debug-dotnet-core-in-wsl-2?view=vs-2022\">Debug .NET apps in Linux using WSL - Visual Studio (Windows) | Microsoft Docs</a></p>\n<p>詳細については上の記事に記載されていますが、今回やりたいLinux上で.NETアプリケーションを実行するところまで触れておきます。</p>\n<p>この機能を利用するには、WSLコンポーネントをインストールする必要があります。Visual Studioのメニューから「Tools > Get Tools and Features」を開きます。</p>\n<p>Visual Stuiod Installerが開かれるので、「個別のコンポーネント」をクリックし、検索ボックスに「WSL」などと入力して、「WSL を用いた .NET デバッグ」のコンポーネントにチェックを入れて、右下の「変更」をクリックしてインストールします。</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a311105f4f1f3124b76f69161ee5b675/21b4d/02.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.49999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABN0lEQVQoz6VS226DMBTjV4ACLZeQpLBRkGAVUvtU9a2XB/7/Mzz5SJnQoNukPVgk0bFjYnvWWhBt26JpGlRVhbquUZYl8jxHkiQvEccxoiiSL/dZlsHTWoOgQFEUSNP0a2C73SIMwwWCIJA5Z4Lzvu8Lx6MqHRpjsNvtFsTNZrMAz+n+dDrher2i73vZi0OKUH2N+Aq8jGQKnc9nMUTHIsgFB74TfhKkQz7POI74OB6htZFz+eU1wb84JG8YBnRdB6WUhMM3/7cgA3WuRdC9oQshJMJgNd15UHRErmsFNUSQndvv93KTMRraGGRZLoOOMF8zTYo5p84ZA5FQpNSHA1SpUdoatn6HsVYuYZUIzrCnXLP4TsxVRSmNt7pFnil40zThfr/j8XjI1+F2u/2KOe/5fOJyueATKMNQxSQR3x4AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"WSLコンポーネントのインストール方法\"\n        title=\"WSLコンポーネントのインストール方法\"\n        src=\"/static/a311105f4f1f3124b76f69161ee5b675/5a190/02.png\"\n        srcset=\"/static/a311105f4f1f3124b76f69161ee5b675/772e8/02.png 200w,\n/static/a311105f4f1f3124b76f69161ee5b675/e17e5/02.png 400w,\n/static/a311105f4f1f3124b76f69161ee5b675/5a190/02.png 800w,\n/static/a311105f4f1f3124b76f69161ee5b675/c1b63/02.png 1200w,\n/static/a311105f4f1f3124b76f69161ee5b675/21b4d/02.png 1280w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\"><p>WSLコンポーネントのインストール方法</p></figcaption>\n  </figure></p>\n<p>次に、 <em>launchSettings.json</em>を開いて、下図のようにWSL項目を追記します。</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/41c75f2fac1d2cee0b95dd0cf7c7866d/d9199/03.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 42%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABIklEQVQoz5WP2U7DMBBF8/9fVvHWFx5AAjVtulA7XsZ2Emc5KOkCqAiJkY7GHmnu3Fvo2lAby0kZqrPjpD3aCC40pG4gdf2VgdBktpVitztQlhWbcsduW7E/KpwknPUUXiL9OCKxY68DRlpyDExdx0NNE+pcs9lseH19oaoqvPc4Z4kxLhTWC23uSU1L7ROSMjklxnFkWjSmC7DMjifF23vJavXEev1MWR44HBX7w3mhcBKIbUvf56uJi8D39+0/C54+FNY5lNLUtcFah3P+ghcKkfCw/BfWekIINE1DSuke9R45hMh/KqUGEVlEf6MwxpGHTExxuToMwwM5Z7quW7Du4nB2c+s/HGptMc5xVhqtDd4HRCJevvocc2Y+Xtf2T8FPWCFqbMAwfhsAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"launchSettings.jsonにWSL項目を追記\"\n        title=\"launchSettings.jsonにWSL項目を追記\"\n        src=\"/static/41c75f2fac1d2cee0b95dd0cf7c7866d/5a190/03.png\"\n        srcset=\"/static/41c75f2fac1d2cee0b95dd0cf7c7866d/772e8/03.png 200w,\n/static/41c75f2fac1d2cee0b95dd0cf7c7866d/e17e5/03.png 400w,\n/static/41c75f2fac1d2cee0b95dd0cf7c7866d/5a190/03.png 800w,\n/static/41c75f2fac1d2cee0b95dd0cf7c7866d/d9199/03.png 960w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\"><p>launchSettings.jsonにWSL項目を追記</p></figcaption>\n  </figure></p>\n<p>一応、コピペ用にテキストも記載しておきます。</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token property\">\"WSL\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token property\">\"commandName\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"WSL\"</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><code>commandName</code> 項目に <code>WSL</code> を記載すればよいわけです。ちなみに、実行するWSLのディストリビューションを明記することもできます。</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token property\">\"WSL\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token property\">\"commandName\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"WSL\"</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token property\">\"distributionName\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Ubuntu-20.04\"</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>あとは下図のようにWSLをデバッグ実行として選択して実行すれば、Linux上で実行されます。実行先のLinuxディストリビューション上に.NET Coreが入っていない場合は、自動的にインストールされますが、その際パスワード（Linux上のユーザーの）を求められるので入力が必要です。</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 754px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/84cd52a9a870d68faca3357d5f584e72/7527b/04.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 29.000000000000004%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABTElEQVQY03WMy27TQABF/cd8AEskFvwJm0pIsECCLXRDRRqFWqWpx+N5+TVOMo6fiQ/CqEuudBdHR/dGmbBYZdBSkWUOlTmE0KSpJkkyUqGR0iKlYS8Md7FmGyf/eC8RwpAkCmtLtMmJYunZPWk2j4KvG4PUFc7k5K6krjyNP+BswdT13KcVr95v+LLN6MMRYxzGFiido7QjzQzRu08PvPmw4+3HmNc3Oz5/3/Jz+8Cv3ymPzxphalzdYspA7k9YZ9DaklcNp7ZfG849/hDInCfq2kDXnWm8p24CZRM4tR2hGwhdTzdOTPOV67JQh4FvO81tbPnxVHG3r9du0iP3abPuor4fGOYL/Tjiw4AsW2QZOIUzQ+O5jiMvmeeZPC8oigJrHVprlNJ47wkhrD4Kbbse1oeAKg64+sg4zSzLwmWauF4uLLDy//LXvfg/tR2/1/cFjBkAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"デバッグ実行にWSLを指定\"\n        title=\"デバッグ実行にWSLを指定\"\n        src=\"/static/84cd52a9a870d68faca3357d5f584e72/7527b/04.png\"\n        srcset=\"/static/84cd52a9a870d68faca3357d5f584e72/772e8/04.png 200w,\n/static/84cd52a9a870d68faca3357d5f584e72/e17e5/04.png 400w,\n/static/84cd52a9a870d68faca3357d5f584e72/7527b/04.png 754w\"\n        sizes=\"(max-width: 754px) 100vw, 754px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\"><p>デバッグ実行にWSLを指定</p></figcaption>\n  </figure></p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 614px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/035b39f6d6e8cbaafe7e85de8358dff1/e9131/05.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 72.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACJUlEQVQ4y42R6U7bQBRG/cK0peId+iKtWEoREmpV/rRqVNRCiSiQEGwncRI7dpzNS5zE+6lmApEQVDDS0bkez3xzx1Yaty1UXafZanJZ17BMn3AW4fshnhcQBBHz+ZI4Tonj5AFJkhFFS+aLmCRJ5RpFb3YIwzmjhYfqmARTmPk+Zcl6lE9RQlEUj1CaukHfHuPMhvxu6DgWhH2TcOCymHos/UBaEA1HzEdjFtMpy3BGXpSPA1vtHlE0Z54ucIMJZQ5lkVMkCXkckwvfkS0WZMvlaj5NeWoo47HPZOqvJ5ZZTJxmJFlOmhcUQFaU6zoXlHcU5SOUiQh0Hdxej3A0wgssoulQkkY+lCllPCOLPChSyGMokv+iWAOPd591Nt5fsLFdY2tfY+uTxtt9lc2Pt7zZvWFzr7GuJXuNFbs3vBbs1Hm1XZNW3JHP4YnK9vcaH77V2K002Knc8OXC4uulveJq5eNrh2NZ9zk8NTj41eKoanJworFT0TiqWiieF9Jp6aj1K5qNOoZ+S7epYfcMHLOzcs+Qdq2unLM6LXptnX63jT921wSTIcpkEmD1Hc7Oq/yo/OT07Byja9LpmtI9y8Z2XPqSgbQ9EAylLdt5gPzLzsBF1TT+nFe5vq7x9/KKxq2Kqum0jQ62CLKdZxHrZIdGp4tp9R9sFIfcP1t9W3K/6d5PIQNFJwK92ZJutQ00vSlrYYF4J0KfDRRXFt/wJVd6SYf/AAHFB2n0CLbXAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"ProcessXのWSL上での実行結果\"\n        title=\"ProcessXのWSL上での実行結果\"\n        src=\"/static/035b39f6d6e8cbaafe7e85de8358dff1/e9131/05.png\"\n        srcset=\"/static/035b39f6d6e8cbaafe7e85de8358dff1/772e8/05.png 200w,\n/static/035b39f6d6e8cbaafe7e85de8358dff1/e17e5/05.png 400w,\n/static/035b39f6d6e8cbaafe7e85de8358dff1/e9131/05.png 614w\"\n        sizes=\"(max-width: 614px) 100vw, 614px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\"><p>ProcessXのWSL上での実行結果</p></figcaption>\n  </figure></p>\n<h2 id=\"まとめ\" style=\"position:relative;\"><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81\" aria-label=\"まとめ permalink\" class=\"header-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>まとめ</h2>\n<p>ProcessXの概要から簡単な使い方、WSL上でのデバッグ実行まで取り上げました。</p>\n<p>個人的にいくつかのシェルスクリプトをC#で置き換えられたらいいなーと思うことがあり触り始めましたが、わりと雰囲気良さそうな感じです。</p>\n<p>またなにか進めば、ProcessX関連で記事を書きたいと思います。</p>\n<h2 id=\"参考\" style=\"position:relative;\"><a href=\"#%E5%8F%82%E8%80%83\" aria-label=\"参考 permalink\" class=\"header-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>参考</h2>\n<ul>\n<li><a href=\"https://github.com/Cysharp/ProcessX#zx\">Cysharp/ProcessX: Simplify call an external process with the async streams in C# 8.0.</a></li>\n<li><a href=\"https://neue.cc/2020/01/30_590.html\">neue cc - ProcessX - C#でProcessを C# 8.0非同期ストリームで簡単に扱うライブラリ</a></li>\n<li><a href=\"https://zenn.dev/okazuki/articles/zx-csharp-intro\">シェルスクリプト風に C# を使えるライブラリ ProcessX 試してみた</a></li>\n<li><a href=\"https://qiita.com/skitoy4321/items/10c47eea93e5c6145d48\">非同期外部プロセス起動で標準出力を受け取る際の注意点 - Qiita</a></li>\n<li><a href=\"https://inokara.hateblo.jp/entry/2020/06/27/084149\">シェルスクリプトを書く時には set -e をつけた方がいいのかな...どうなんだろう - ようへいの日々精進XP</a></li>\n</ul>","excerpt":"Cysharp/ProcessX: Simplify call an external process with the async streams in C# 8.0.\r\nneue cc - ProcessX - C#でProcessを C# 8.0非同期ストリームで簡単に扱うライブラリ C#でシェルを書くためのライブラリである Cysharp/ProcessX を触ってみます。 通常C#でシェルを実行するには、外部プロセスを System.Diagnostics.Process…","fields":{"slug":"/articles/2022/01/processx-intro/"},"frontmatter":{"date":"January 26, 2022","type":null,"tags":["Tech","ProcessX","C#","CLI","Shell"],"title":"ProcessXを試してみる","description":null,"eyecatch":null}}},"pageContext":{"id":"9f50d2d5-3fa4-57a3-a846-8dcd63029653"}},"staticQueryHashes":["1480509143","3159585216"]}