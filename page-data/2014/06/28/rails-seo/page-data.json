{"componentChunkName":"component---src-templates-post-tsx","path":"/2014/06/28/rails-seo/","result":{"data":{"markdownRemark":{"html":"<p>個人でRailsで開発しているサービスのSEOを少しまじめに調べたので,\nブログにもアウトプットしてみた. 基本, 有名そうなGemを拾って対応した.</p>\n<h2 id=\"metatags\" style=\"position:relative;\"><a href=\"#metatags\" aria-label=\"metatags permalink\" class=\"header-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>MetaTags</h2>\n<p><a href=\"https://github.com/kpumuk/meta-tags\">https://github.com/kpumuk/meta-tags</a></p>\n<p>SEOに重要そうなメタタグの管理を行ってくれるgem. 基本的なメタタグ以外に,\nOpenGraph, Twitter Cards, などのタグもサポートしてくれている.\nもちろん独自のメタタグも導入できる.</p>\n<p>基本的にREADMEに書かれているメタタグを仕込んでおけば大丈夫そう.</p>\n<h3 id=\"使い方\" style=\"position:relative;\"><a href=\"#%E4%BD%BF%E3%81%84%E6%96%B9\" aria-label=\"使い方 permalink\" class=\"header-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>使い方</h3>\n<p>Bundleでインストールを行う. Gemfileに以下を記述する.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">gem 'meta-tags'</code></pre></div>\n<p>次に, メタタグを仕込みたいビューファイルに以下を記述する.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;%= display_meta_tags %></code></pre></div>\n<p><code>display_meta_tags</code>には引数が渡せて, デフォルトで埋め込むメタタグを設定できる.\nただし, <code>set_meta_tags</code>で設定するとそのメタタグは上書きされる.</p>\n<p>例えば, <code>:site</code>などは全ページで共通のものを利用することが多いはずなので,\n以下の様に設定しておくと毎回設定しなくて良くて便利.</p>\n<div class=\"gatsby-highlight\" data-language=\"erb\"><pre class=\"language-erb\"><code class=\"language-erb\"><span class=\"token erb language-erb\"><span class=\"token delimiter punctuation\">&lt;%=</span><span class=\"token ruby language-ruby\"> display_meta_tags<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token symbol\">:site</span> <span class=\"token operator\">=></span> <span class=\"token string-literal\"><span class=\"token string\">'HogePiyoSite'</span></span><span class=\"token punctuation\">,</span>\n  <span class=\"token symbol\">:reverse</span> <span class=\"token operator\">=></span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n</span><span class=\"token delimiter punctuation\">%></span></span></code></pre></div>\n<p>メタタグを設定するには<code>set_meta_tags</code>をコントローラ内またはビューファイルで利用する.\n例えばビューファイル内で設定するには以下のようにする.</p>\n<div class=\"gatsby-highlight\" data-language=\"erb\"><pre class=\"language-erb\"><code class=\"language-erb\"><span class=\"token erb language-erb\"><span class=\"token delimiter punctuation\">&lt;%</span><span class=\"token ruby language-ruby\"> set_meta_tags <span class=\"token symbol\">:title</span> <span class=\"token operator\">=></span> <span class=\"token string-literal\"><span class=\"token string\">'HogePiyoTitle'</span></span> </span><span class=\"token delimiter punctuation\">%></span></span></code></pre></div>\n<h3 id=\"設定しておくと良さそうなメタタグ\" style=\"position:relative;\"><a href=\"#%E8%A8%AD%E5%AE%9A%E3%81%97%E3%81%A6%E3%81%8A%E3%81%8F%E3%81%A8%E8%89%AF%E3%81%95%E3%81%9D%E3%81%86%E3%81%AA%E3%83%A1%E3%82%BF%E3%82%BF%E3%82%B0\" aria-label=\"設定しておくと良さそうなメタタグ permalink\" class=\"header-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>設定しておくと良さそうなメタタグ</h3>\n<p>この辺は, テストでちゃんと設定されているかチェックしておけば\nリリース直前で慌てるなんてことがなくなっていいかもしれない.</p>\n<ul>\n<li>基本的なメタタグ\n<ul>\n<li>title (<code>:title</code>)</li>\n<li>description (<code>:description</code>)</li>\n<li>keywords (<code>:keywords</code>)</li>\n<li>Canonical URL (<code>:canonical</code>)</li>\n</ul>\n</li>\n<li>Open Graph (<code>:og</code>)</li>\n<li>Twiter Cards (<code>:twitter</code>)</li>\n<li>Google Plus (Author Rank)\n<ul>\n<li>Author links (<code>:author</code>)</li>\n<li>Publisher links (<code>:publisher</code>)</li>\n</ul>\n</li>\n<li>必要に応じて\n<ul>\n<li>Pagination links (<code>:prev</code>, <code>:next</code>)</li>\n<li>Noindex, Nofollow</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"sitemapgenerator\" style=\"position:relative;\"><a href=\"#sitemapgenerator\" aria-label=\"sitemapgenerator permalink\" class=\"header-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>SitemapGenerator</h2>\n<p><a href=\"https://github.com/kjvarga/sitemap_generator\">https://github.com/kjvarga/sitemap_generator</a></p>\n<p>サイトマップを簡単に作るためのgem. 地味にめんどくさいサイトマップのインデックスの作成や,\n各検索エンジンにPing送信, 検索エンジン別にサイトマップを変更したりして便利.</p>\n<h3 id=\"インストール\" style=\"position:relative;\"><a href=\"#%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB\" aria-label=\"インストール permalink\" class=\"header-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>インストール</h3>\n<p>MetaTagsと同様Bundleでインストールを行う.</p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre class=\"language-ruby\"><code class=\"language-ruby\">gem <span class=\"token string-literal\"><span class=\"token string\">'sitemap_generator'</span></span></code></pre></div>\n<p>次に, <code>config/sitemap.rb</code>を作成する. 以下のコマンドを実行する.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">bundle exec rake sitemap:install</code></pre></div>\n<h3 id=\"使い方-1\" style=\"position:relative;\"><a href=\"#%E4%BD%BF%E3%81%84%E6%96%B9-1\" aria-label=\"使い方 1 permalink\" class=\"header-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>使い方</h3>\n<p><code>config/sitemap.rb</code>以下に追加したいURLを<code>add</code>メソッドで行う.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">SitemapGenerator::Sitemap.create do\n  Article.all.each do |article|\n    add article_show_path(article), :priority => 0.7, :changefreq => 'weekly', :astmod => article.updated_at\n  end\nend</code></pre></div>\n<p>また, いろんな設定ができる.</p>\n<p>詳細は<a href=\"https://github.com/kjvarga/sitemap_generator#sitemap-configuration\">https://github.com/kjvarga/sitemap_generator#sitemap-configuration</a>のSitemap Optionsより確認できる.</p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre class=\"language-ruby\"><code class=\"language-ruby\"><span class=\"token comment\"># ホストを設定する</span>\nSitemapGenerator<span class=\"token double-colon punctuation\">::</span>Sitemap<span class=\"token punctuation\">.</span>default_host <span class=\"token operator\">=</span> <span class=\"token string-literal\"><span class=\"token string\">\"http://example.com\"</span></span>\n<span class=\"token comment\"># サイトマップを配置するディレクトリを設定する</span>\nSitemapGenerator<span class=\"token double-colon punctuation\">::</span>Sitemap<span class=\"token punctuation\">.</span>sitemaps_path <span class=\"token operator\">=</span> <span class=\"token string-literal\"><span class=\"token string\">'sitemaps/'</span></span>\n<span class=\"token comment\"># インデックスサイトマップを作成するかどうか設定する</span>\nSitemapGenerator<span class=\"token double-colon punctuation\">::</span>Sitemap<span class=\"token punctuation\">.</span>create_index <span class=\"token operator\">=</span> <span class=\"token symbol\">:auto</span></code></pre></div>\n<p>サイトマップの生成は, Rakeコマンドより行う.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">rake sitemap:clean                      # サイトマップを削除する\nrake sitemap:create                     # サイトマップを作成する(検索エンジンにpingを送らない)\nrake sitemap:refresh                    # サイトマップを作成し, 検索エンジンにpingを送る\nrake sitemap:refresh:no_ping            # サイトマップを作成する(検索エンジンにpingを送らない, たぶんsitemap:createと一緒?)</code></pre></div>","excerpt":"個人でRailsで開発しているサービスのSEOを少しまじめに調べたので,\nブログにもアウトプットしてみた. 基本, 有名そうなGemを拾って対応した. MetaTags https://github.com/kpumuk/meta-tags SEOに重要そうなメタタグの管理を行ってくれるgem. 基本的なメタタグ以外に,\nOpenGraph, Twitter Cards, などのタグもサポートしてくれている.\nもちろん独自のメタタグも導入できる. 基本的にREADME…","fields":{"slug":"/2014/06/28/rails-seo/"},"frontmatter":{"date":"June 28, 2014","type":null,"tags":null,"title":"Railsでそこそこ真面目にSEO対策する","description":null,"eyecatch":null}}},"pageContext":{"id":"01337b99-b512-5998-b311-7b4a913f2fb6"}},"staticQueryHashes":["1480509143","3159585216"]}