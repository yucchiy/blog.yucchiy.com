{"componentChunkName":"component---src-templates-post-tsx","path":"/2018/07/01/omnisharp-vim-with-roslyn/","result":{"data":{"markdownRemark":{"html":"<p>久々にOmniSharpを更新しようとしたら、<a href=\"http://blog.yucchiy.com/2016/05/05/unity-vim-omnisharp/\">昔セットアップした頃</a>に比べて、構成等がいろいろ変わっていたので、メモがてらにブログを書く。\n詳細は<a href=\"https://github.com/OmniSharp/omnisharp-vim/blob/96ec4327f1756f3090e4576749a9cc0ae0c5379c/README.md\">こちら</a>を参照されたい。</p>\n<h2 id=\"installation\" style=\"position:relative;\"><a href=\"#installation\" aria-label=\"installation permalink\" class=\"header-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Installation</h2>\n<p>OmniSharp-vimの利用には以下が必要になる。</p>\n<ul>\n<li>Server\n<ul>\n<li><a href=\"https://github.com/OmniSharp/omnisharp-roslyn\">OmniSharp-Roslyn</a></li>\n<li><a href=\"https://github.com/OmniSharp/omnisharp-server\">OmniSharp-server</a>\n<ul>\n<li>レガシーサーバー</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>Python</li>\n<li>Asynchronous command execution\n<ul>\n<li>Vim with job control API is used (8.0+)</li>\n<li>neovim</li>\n<li><a href=\"https://github.com/tpope/vim-dispatch\">vim-dispatch</a></li>\n<li><a href=\"https://github.com/Shougo/vimproc.vim\">vimproc.vim</a></li>\n</ul>\n</li>\n<li>Selector UI\n<ul>\n<li><a href=\"https://github.com/junegunn/fzf.vim\">fzf.vim</a></li>\n<li><a href=\"https://github.com/ctrlpvim/ctrlp.vim\">CtrlP</a></li>\n<li><a href=\"https://github.com/Shougo/unite.vim\">unite.vim</a></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"server\" style=\"position:relative;\"><a href=\"#server\" aria-label=\"server permalink\" class=\"header-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Server</h3>\n<p>OmniSharp-vimには<a href=\"https://github.com/OmniSharp/omnisharp-roslyn\">OmniSharp/omnisharp-roslyn</a>が必要となる。</p>\n<p>OmniSharp-roslynは、名前の通りRoslynベースの言語サーバーである。</p>\n<p>パッケージは、<a href=\"https://github.com/OmniSharp/omnisharp-roslyn/releases\">こちら</a>にビルド済みのものが配布されているが、今回は自分でビルドすることにする。\n詳細は<a href=\"https://github.com/OmniSharp/omnisharp-roslyn/blob/master/BUILD.md\">こちら</a>が参考にするとよい。</p>\n<p>ビルドするためには、.NET 4.6なので、事前にインストールしておく必要がある。</p>\n<p>またmacOSでビルド・実行するにはMono5.2.0が必要である。インストールは<a href=\"http://www.mono-project.com/download/stable/\">.pkg</a>か、Homebrewを用いるとよい。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">brew update\nbrew install mono\nbrew install caskroom/cask/mono-mdk</code></pre></div>\n<p>ソースをビルドするには、<a href=\"https://github.com/OmniSharp/omnisharp-roslyn\">OmniSharp/omnisharp-roslyn</a>レポジトリを落としてきて、<code>build.sh</code>を実行する。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">cd Path/To/omnisharp-roslyn\n./build.sh</code></pre></div>\n<p>ビルドが成功すると、<code>artifacts/publish/OmniSharp.Http.Driver/OmniSharp.exe</code>が生成される。</p>\n<h3 id=\"python\" style=\"position:relative;\"><a href=\"#python\" aria-label=\"python permalink\" class=\"header-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Python</h3>\n<p>Pythonが利用可能かどうかは以下のコマンドを実行する</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">:echo has('python')</code></pre></div>\n<h3 id=\"asynchronous-command-execution\" style=\"position:relative;\"><a href=\"#asynchronous-command-execution\" aria-label=\"asynchronous command execution permalink\" class=\"header-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Asynchronous command execution</h3>\n<p>OmniSharp-vimは、次の条件を満たしている場合のみ、サーバーをの起動、非同期ビルドを実行できる。</p>\n<ul>\n<li>Vim with job control API is used (8.0+)</li>\n<li>neovim</li>\n<li><a href=\"https://github.com/tpope/vim-dispatch\">vim-dispatch</a></li>\n<li><a href=\"https://github.com/Shougo/vimproc.vim\">vimproc.vim</a></li>\n</ul>\n<p>Vim 8.0以上であれば、Job control APIを利用し、またneovimを利用していれば特になにもしなくて良さそう。\nこの条件に当てはまらなければ、vim-dispatchかvimproc.vimをインストールすればよい。</p>\n<h2 id=\"how-to-use\" style=\"position:relative;\"><a href=\"#how-to-use\" aria-label=\"how to use permalink\" class=\"header-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>How to Use</h2>\n<p>まずはOmniSharp-vimはインストールする。<code>NeoBundle</code>からインストールするには、以下を<code>.vimrc</code>に記述する</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">NeoBundleLazy 'OmniSharp/omnisharp-vim', {\n      \\   'autoload': { 'filetypes': [ 'cs', 'csi', 'csx' ] },\n      \\ }</code></pre></div>\n<p>Roslynを言語サーバーとして利用するには以下のように設定する。</p>\n<p><code>OmniSharp_server_type</code>は、<a href=\"https://github.com/OmniSharp/omnisharp-vim/tree/96ec4327f1756f3090e4576749a9cc0ae0c5379c\">2018/07/01現在のレポジトリ</a>では<code>roslyn</code>になっているが、念の為指定する。\n<code>OmniSharp_server_path</code>には、先程作成した<code>OmniSharp.exe</code>のパスを指定する。</p>\n<p>また、MacOSで実行するにはMonoが必要になる。そのため<code>OmniSharp_server_use_mono</code>を<code>1</code>として、monoで実行するようにする。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">let g:OmniSharp_server_type='roslyn'\nlet g:OmniSharp_server_path = '/Path/To/OmniSharp.exe'\nlet g:OmniSharp_server_use_mono = 1</code></pre></div>\n<p>OmniSharp-Roslynには<a href=\"http://libuv.org/\">libuv</a>が必要になる。\nMacであればHomebrew経由で、<code>brew install libuv</code>でインストールできる。</p>\n<p>以上。</p>","excerpt":"久々にOmniSharpを更新しようとしたら、昔セットアップした頃に比べて、構成等がいろいろ変わっていたので、メモがてらにブログを書く。\n詳細はこちらを参照されたい。 Installation OmniSharp-vimの利用には以下が必要になる。 Server OmniSharp-Roslyn OmniSharp-server レガシーサーバー Python Asynchronous command execution Vim with job control API is used (8.…","fields":{"slug":"/2018/07/01/omnisharp-vim-with-roslyn/"},"frontmatter":{"date":"June 30, 2018","type":null,"tags":["Unity","C#","Vim"],"title":"RoslynベースのOmniSharp/omnisharp-vimをMacで試す","description":null,"eyecatch":null}}},"pageContext":{"id":"3a5c274d-8ddd-5b81-948d-71ca678a514d"}},"staticQueryHashes":["1480509143","3159585216"]}