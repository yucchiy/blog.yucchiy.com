{"componentChunkName":"component---src-templates-post-tsx","path":"/2020/03/controling-unity-recorder-from-script/","result":{"data":{"markdownRemark":{"html":"<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 516px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/953173d210e71f2cff510d2c82b95f18/75dcb/unity-recorder.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 75.49999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB+UlEQVQoz52SQWsTQRTH91N48CAt1WqJbXZ3diYzuzvzZjbZNJvdbMiuJinRBBuJaVXctuJFEAriqYIHEU9+Au8eBQ+CB29+CqHfQKhsNgaVitU/f4YH837wf7ynEUIopY7jcM6FEAAgzyytgG3bdl33f+BKpcIYy2HOpRD/AGOMc5hS5jhUCAYgpFS/Niml/gwTQhirUjqwKjcYrwkQSkkA8UOc81PH0bBloQrZtPBTg7woo6Pzy4dr5brLq77fDHKFYZgkSaPR8DzvtyCahZBF6f2VKy/B//Lx09uHj95s4J11I75+bXxrO8sejMfj4XA4GAyKjRQqgmgmQjYhB0uXjrh3/PX428nJu8NnO0sX4zQdDYdbW1vdbjdJkjRNO51Ou92O4zhN01qtBgAaMk0D49vLq6+E//n9h9fbd56vlPprV/vDm3d3dyeTSa/X6/f7+wf7WZZNp9PRaJTt7UWtFudcM03TxNjV9axUfry6/uTchXuXS5yxul+PmmEctcKgGUdRsNlohVErisKgGQZBVXlSyBzOxyaEINPf0H1kMcYAQAmQXMztcrWoZ/ZAeiA1wzAQQsW2sWNT7gIXwIWafReuSjV/Z8XCOTwLjvNlU+rYNndzXgn4ue9Ua7qu58kta3HkBSzPCBuGUcDzI3cc4XIQoP4GfwclQu+Kh3cw5AAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Unity Recorder\"\n        title=\"Unity Recorder\"\n        src=\"/static/953173d210e71f2cff510d2c82b95f18/75dcb/unity-recorder.png\"\n        srcset=\"/static/953173d210e71f2cff510d2c82b95f18/772e8/unity-recorder.png 200w,\n/static/953173d210e71f2cff510d2c82b95f18/e17e5/unity-recorder.png 400w,\n/static/953173d210e71f2cff510d2c82b95f18/75dcb/unity-recorder.png 516w\"\n        sizes=\"(max-width: 516px) 100vw, 516px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\"><p>Unity Recorder</p></figcaption>\n  </figure></p>\n<p><a href=\"https://assetstore.unity.com/packages/essentials/unity-recorder-94079\">Unity Recorder</a>はUnity Editor上で実行したシーンの描画結果（例えばゲームビューやRenderTextureなど）を画像や動画として保存するためのアセットです。\nUnity RecorderではUI経由およびタイムラインで<code>RecordTrack</code>と<code>RecordClip</code>を仕込むことで、動画を撮影することができます。</p>\n<p>下記画像が、それぞれUnity RecorderのUI(Recorder Window)とタイムライン設定になります。</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e61ec8100f6811940d9526d21b407346/f96df/editor-ui-for-unity-recorder.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 55.00000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAACVElEQVQoz22SzW7TQBDHfUGifQEeoMSO47Xj711/rb3edVy3UZUeOJccEEgIiUrcuKQ5te9QhTM8Cick4MSDRNpEGbQrtQLB4af/eD07O//ZNcTZhY/56d3Y9VYT2147jvMPCCGtk8lkbdu2VtM015ZlrcemtTanzooL+3aYooWBpv7rt+cX8KIVQBmDVtG20Pc9dF0HdV1D0zSQ5zkURQGcc8AYA2NM/6MVBVrXwDmFEuPPBnLdq5eMw2XdbJkQkjEmm6aRQgitdV3rtaIoZFmWsm1bmee5HIZBxy3nkrfttmlawCS7N3zfX07jGGKMdxjjg+/7EMcxpGmqO1H8GT98J0mi8zRJsldrURRtjGEYlpeLBczn813f9wdlVVmjlGp7WZbpIp3gcDrroO8EcMagoRWwmkJdVSp3nxeFKr4xkiRZEkLUpl2apgd1kkLNTPHQVVxWEJQU/KICPy8fSWoGFaX7jBB1+MawbXvpOA4ghHYIoYOKlW09cEp1sQRjeMUofGwpvC9S+FDFcJ0H8C5BcF1GsBj6PclzyAjZGI7jLD3PA8/zdp7nHVzXhTAMtVXVOcEYQpLBJ+cZ/Bo9gW/WEfwYH8N36wh+Wk/hq3kM8yTYJ1kORUY2xmQyuVJFXNfduq4rFUEQ6Jvt+17fLiFEzrpOnp8NciaE7ASXnVYhZ52QgvOtaiBN03sDIfRmOp3CA6p4EAS6u7IsNWqm+q0JobWsqr+oqkrneJ73RT2bIIqiuyiKVmEY3ozH40dM09ToeDS6eX5yovU/rGzbvrUsa/Eb8aVQFWOKeGgAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Recorder WindowによるUnity Recorderによる画面の録画方法\"\n        title=\"Recorder WindowによるUnity Recorderによる画面の録画方法\"\n        src=\"/static/e61ec8100f6811940d9526d21b407346/5a190/editor-ui-for-unity-recorder.png\"\n        srcset=\"/static/e61ec8100f6811940d9526d21b407346/772e8/editor-ui-for-unity-recorder.png 200w,\n/static/e61ec8100f6811940d9526d21b407346/e17e5/editor-ui-for-unity-recorder.png 400w,\n/static/e61ec8100f6811940d9526d21b407346/5a190/editor-ui-for-unity-recorder.png 800w,\n/static/e61ec8100f6811940d9526d21b407346/f96df/editor-ui-for-unity-recorder.png 849w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\"><p>Recorder WindowによるUnity Recorderによる画面の録画方法</p></figcaption>\n  </figure></p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c64fd2721543968e806368fd4c7baf17/86a1e/timeline-for-unity-recorder.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 32.49999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABLUlEQVQoz22R3UrEMBCF+zCKtk230CbdNP9J2wVB1Au98kLZh/BSEPG5j0y6u7K4F4cJk8yXMzOFlBLBe6SU4L1HCBHGehjjsN1uIYSAMQbzPOdz3/fgvM+x67ozUa6gIoKStNK4e3rE/cszBimx2WzQti0451iWBSGE9Z3WWKYJwVlE51Z5B6s1iqqqUJZlFmMMrGEo6wqUP97Rz+RyGIascRwh0wQeJoiQ0PuYzyYmFFRwLCRgwxjKkmD1GdC5dQS5o1HhQ7X4ETf4Gm7x2V3ju7/C3o8XgE1zcPcHpPlQu2pUB+CIVyex1xxviuNdC+wVx4NV/4HsgkMCxphObWul4JcdVJogQzzJhLDOsK7XYnJHi6gzuMlwAgveYTfbvAyaH0XvLJw1cNae6Rf11eT4iZhU6wAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"タイムラインでのUnity Recorderによる画面の録画方法\"\n        title=\"タイムラインでのUnity Recorderによる画面の録画方法\"\n        src=\"/static/c64fd2721543968e806368fd4c7baf17/5a190/timeline-for-unity-recorder.png\"\n        srcset=\"/static/c64fd2721543968e806368fd4c7baf17/772e8/timeline-for-unity-recorder.png 200w,\n/static/c64fd2721543968e806368fd4c7baf17/e17e5/timeline-for-unity-recorder.png 400w,\n/static/c64fd2721543968e806368fd4c7baf17/5a190/timeline-for-unity-recorder.png 800w,\n/static/c64fd2721543968e806368fd4c7baf17/c1b63/timeline-for-unity-recorder.png 1200w,\n/static/c64fd2721543968e806368fd4c7baf17/86a1e/timeline-for-unity-recorder.png 1296w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\"><p>タイムラインでのUnity Recorderによる画面の録画方法</p></figcaption>\n  </figure></p>\n<p>これだけでもすでに便利なのですが、この記事ではUnity Recorderを <strong>スクリプトから操作する方法</strong> について説明します。\nエディタ限定ではありますが、スクリプトから操作できると動画撮影の自動化などがいろいろ捗ったりと、いろいろ便利かもしれません。</p>\n<p><a href=\"https://forum.unity.com/threads/control-unity-recorder-from-script.840946/\">Video - Control Unity Recorder from Script - Unity Forum</a>を参考にしています。</p>\n<h2 id=\"unityeditorrecorderrecordercontroller\" style=\"position:relative;\"><a href=\"#unityeditorrecorderrecordercontroller\" aria-label=\"unityeditorrecorderrecordercontroller permalink\" class=\"header-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>UnityEditor.Recorder.RecorderController</h2>\n<p>Unity Recorderには<a href=\"https://unitytech.github.io/unity-recorder/api/UnityEditor.Recorder.RecorderController.html\">RecorderController</a>というクラスが<code>UnityEditor.Recorder</code>名前空間に実装されていて、このクラスを利用することでスクリプトからレコーダを操作することができます。</p>\n<h3 id=\"初期化と設定について\" style=\"position:relative;\"><a href=\"#%E5%88%9D%E6%9C%9F%E5%8C%96%E3%81%A8%E8%A8%AD%E5%AE%9A%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6\" aria-label=\"初期化と設定について permalink\" class=\"header-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>初期化と設定について</h3>\n<p>RecorderControllerの初期化時に、レコーダーの動作を設定するための<a href=\"https://unitytech.github.io/unity-recorder/api/UnityEditor.Recorder.RecorderControllerSettings.html\">RecorderControllerSettings</a>インスタンスをコンストラクタに渡す必要があります。<code>RecorderControllerSettings</code>ではフレームレートや録画モードの設定と<code>RecorderSettings</code>の追加を行います。</p>\n<p>フレームレートの設定は、フレームレート数や<a href=\"https://docs.unity3d.com/Packages/com.unity.recorder@2.1/api/UnityEditor.Recorder.FrameRatePlayback.html\">プレイフィードバック</a>について設定します。具体的には下記のように設定します。</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token comment\">// `RecorderControllerSettings`はScriptableObject</span>\n<span class=\"token class-name\"><span class=\"token keyword\">var</span></span> setting <span class=\"token operator\">=</span> ScriptableObject<span class=\"token punctuation\">.</span><span class=\"token generic-method\"><span class=\"token function\">CreateInstance</span><span class=\"token generic class-name\"><span class=\"token punctuation\">&lt;</span>RecorderControllerSettings<span class=\"token punctuation\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// フレームレートを30fpsに設定します</span>\nsetting<span class=\"token punctuation\">.</span>frameRate <span class=\"token operator\">=</span> <span class=\"token number\">30f</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>録画モードではレコーダーの録画区間を設定します。具体的には、手動で区間を設定するか(後述する<code>RecorderController</code>の<code>StartRecording()</code>メソッドおよび<code>StopRecording()</code>を手動で呼び出して録画するか)、区間を予め明示するかを設定します。</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token comment\">// 手動設定にする</span>\nsetting<span class=\"token punctuation\">.</span><span class=\"token function\">SetRecordModeToManual</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// フレーム番号指定で１フレームを撮影する。</span>\n<span class=\"token comment\">// この場合は１０フレーム目を録画する。</span>\nsetting<span class=\"token punctuation\">.</span><span class=\"token function\">SetRecordModeToSingleFrame</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// 時間で区間を指定して撮影する。この場合は</span>\n<span class=\"token comment\">// 区間が開始が0.5秒で、終了が2.0秒の計1.5秒を撮影する。</span>\nsetting<span class=\"token punctuation\">.</span><span class=\"token function\">SetRecordModeToTimeInterval</span><span class=\"token punctuation\">(</span><span class=\"token number\">0.5f</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2f</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// フレーム番号で区間を指定して撮影する。この場合は</span>\n<span class=\"token comment\">// 区間が開始が15フレームで、終了が45フレームの計30フレームを撮影する。</span>\n<span class=\"token function\">SetRecordModeToFrameInterval</span><span class=\"token punctuation\">(</span><span class=\"token number\">15</span><span class=\"token punctuation\">,</span> <span class=\"token number\">45</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>最後に<code>RecorderSettings</code>を追加します。Unity Recorderでは下記の図のように撮影結果の出力フォーマットが動画だけではなく音声や連番画像、Gif動画、さらにはアニメーションクリップへの出力もサポートしています。\nこのように撮影結果を異なるフォーマットで保存できるように、また新しいフォーマット追加の拡張をしやすいようにレコーダー部分を抽象化しています。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 797px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/077676138b2a59bedd334aea14363fce/43fbc/multiple-recorder.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 48.50000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABwklEQVQoz01SW67TMBDNEvigbAGhplLbuI7t2LHjOGnS9F4+LuoFigQXCVgCC2EhPCTY3kEzfagfR/OKJ2fOTNbEHkIIxmazgZQSZVkyKKZ8URRXrNdrxmq1OvlkCwE3CBwaiezH43t0zmF/f4e+6zAMA/b7PaZpQkoJbdsixgilFPq+59gYg3EcuX5F7KAqi+zgA6wxaFOCsxbeezRNA2st6rq+gphTY8oTuq7jvD/XffCoKoOskBJKax5vuVzyiLdjk3+JieUlvpXp8obqWQwBxmgOTroJZkkMiIksS46n3Y4lGYcBTQgI3l9BdecctNbI+u2AfrtFE1vUPqBUClor1unEUkLSBNZBVBaFqbDWhi1BWAdT1/yGvs8ePn7B4fM3vD4+YfvmCOMb1M4hNM2JsSzRuwpfx4SnLuDoDT4Ei7e2xIMq8M6WeByJUOSxs2EcmSE1cHV9ZqiZodEKS6XxSeT4O3+OX/MZfucz/Fm8YPtzPsO/V8/wvXgJWXuoUiKjzV70U8RICN4aaUhN6a+Vc0jDiJASfNueka6IKbHePHKe51gsFgzy6VirquLTuT2TadrxjbYxIlLtBpSjpVDD/xDNWNRxOuaoAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"multiple recorder\"\n        title=\"multiple recorder\"\n        src=\"/static/077676138b2a59bedd334aea14363fce/43fbc/multiple-recorder.png\"\n        srcset=\"/static/077676138b2a59bedd334aea14363fce/772e8/multiple-recorder.png 200w,\n/static/077676138b2a59bedd334aea14363fce/e17e5/multiple-recorder.png 400w,\n/static/077676138b2a59bedd334aea14363fce/43fbc/multiple-recorder.png 797w\"\n        sizes=\"(max-width: 797px) 100vw, 797px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>今回は動画を撮影したいので、動画出力のためのレコーダーを追加します。具体的には下記のように<a href=\"https://unitytech.github.io/unity-recorder/api/UnityEditor.Recorder.MovieRecorderSettings.html\">MovieRecorderSettings</a>インスタンスを作成し、設定します。</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token comment\">// MovieRecorderSettingsもScriptableObject</span>\n<span class=\"token class-name\"><span class=\"token keyword\">var</span></span> movieRecorderSettings <span class=\"token operator\">=</span> ScriptableObject<span class=\"token punctuation\">.</span><span class=\"token generic-method\"><span class=\"token function\">CreateInstance</span><span class=\"token generic class-name\"><span class=\"token punctuation\">&lt;</span>MovieRecorderSettings<span class=\"token punctuation\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// 撮影する対象を指定します</span>\n<span class=\"token comment\">// この設定では、ゲームビューを解像度640x480で撮影します</span>\nmovieRecorderSettings<span class=\"token punctuation\">.</span>imageInputSettings <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">GameViewInputSettings</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>outputWidth <span class=\"token operator\">=</span> <span class=\"token number\">640</span><span class=\"token punctuation\">,</span> outputHeight <span class=\"token operator\">=</span> <span class=\"token number\">480</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// 音声も録画対象に含めます</span>\nmovieRecorderSettings<span class=\"token punctuation\">.</span>audioInputSettings<span class=\"token punctuation\">.</span>preserveAudio <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// 動画のファイル名を指定します。撮影された動画は、プロジェクトルート直下に、このファイル名で保存されます</span>\nmovieRecorderSettings<span class=\"token punctuation\">.</span>outputFile <span class=\"token operator\">=</span> <span class=\"token string\">\"dark-movie-recording\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// 動画のフォーマットを指定します。MP4とWEBMのどちらかを指定します。</span>\nmovieRecorderSettings<span class=\"token punctuation\">.</span>outputFormat <span class=\"token operator\">=</span> VideoRecorderOutputFormat<span class=\"token punctuation\">.</span>MP4<span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// レコーダーを有効にします</span>\nmovieRecorderSettings<span class=\"token punctuation\">.</span>enabled <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// レコーダーを追加します</span>\nsetting<span class=\"token punctuation\">.</span><span class=\"token function\">AddRecorederSettings</span><span class=\"token punctuation\">(</span>movieRecorderSettings<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>最後に<code>RecorderController</code>を初期化します。</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token class-name\"><span class=\"token keyword\">var</span></span> recorderController <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">RecorderController</span><span class=\"token punctuation\">(</span>setting<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"レコーダーコントローラの起動と停止\" style=\"position:relative;\"><a href=\"#%E3%83%AC%E3%82%B3%E3%83%BC%E3%83%80%E3%83%BC%E3%82%B3%E3%83%B3%E3%83%88%E3%83%AD%E3%83%BC%E3%83%A9%E3%81%AE%E8%B5%B7%E5%8B%95%E3%81%A8%E5%81%9C%E6%AD%A2\" aria-label=\"レコーダーコントローラの起動と停止 permalink\" class=\"header-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>レコーダーコントローラの起動と停止</h3>\n<p><code>RecorderController</code>を手動で初期化した場合は、録画の開始と停止を行うことで動画を撮影することができます。\n具体的には起動には<code>RecorderController.StartRecording()</code>を、停止に<code>RecorderController.StopRecording()</code>を呼び出します。</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">recorderController<span class=\"token punctuation\">.</span><span class=\"token function\">StartRecording</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// ここから撮影が開始されるのでコンテンツを動かすなどする</span>\n\n<span class=\"token comment\">// ここで撮影終了。動画が保存される。</span>\nrecorderController<span class=\"token punctuation\">.</span><span class=\"token function\">StopRecording</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>録画が停止されたタイミングで、プロジェクトルート以下に<code>outputFile</code>に指定したファイル名で動画が保存されます。</p>\n<h3 id=\"参考\" style=\"position:relative;\"><a href=\"#%E5%8F%82%E8%80%83\" aria-label=\"参考 permalink\" class=\"header-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>参考</h3>\n<ul>\n<li><a href=\"https://forum.unity.com/threads/control-unity-recorder-from-script.840946/\">Video - Control Unity Recorder from Script - Unity Forum</a></li>\n<li><a href=\"https://assetstore.unity.com/packages/essentials/unity-recorder-94079\">Unity Recorder</a></li>\n</ul>","excerpt":"Unity RecorderはUnity Editor上で実行したシーンの描画結果（例えばゲームビューやRenderTextureなど）を画像や動画として保存するためのアセットです。\nUnity RecorderではUI経由およびタイムラインでRecordTrackとRecordClipを仕込むことで、動画を撮影することができます。 下記画像が、それぞれUnity RecorderのUI(Recorder Window…","fields":{"slug":"/2020/03/controling-unity-recorder-from-script/"},"frontmatter":{"date":"March 18, 2020","type":null,"tags":["Unity","Unity Recorder","Editor","C#"],"title":"Unity Recorderをスクリプトから操作して動画を撮影する","description":null,"eyecatch":null}}},"pageContext":{"id":"04d0f22f-0085-5999-ac47-65e3e40cade1"}},"staticQueryHashes":["1480509143","3159585216"]}